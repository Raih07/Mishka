function clickDocumentDetect(){document.body.classList.remove("tab-user"),document.removeEventListener("click",clickDocumentDetect)}document.body.onkeydown=function(e){9===e.keyCode&&(document.body.classList.add("tab-user"),document.addEventListener("click",clickDocumentDetect))};var nav_toggle=document.querySelector(".main-nav__toggle"),main_nav=document.querySelector(".main-nav");main_nav.classList.remove("main-nav--nojs"),nav_toggle.addEventListener("click",function(){main_nav.classList.contains("main-nav--open")?(main_nav.classList.remove("main-nav--open"),main_nav.classList.add("main-nav--close")):(main_nav.classList.remove("main-nav--close"),main_nav.classList.add("main-nav--open"))});var desktop_width=1150;if(document.getElementById("YMapsID")){var myMap,myPlacemar;function init(){var e=document.documentElement.clientWidth||document.body.clientWidth;(myMap=e>=desktop_width?new ymaps.Map("YMapsID",{center:[59.9388,30.323148],zoom:16,controls:[]}):new ymaps.Map("YMapsID",{center:[59.9388,30.323148],zoom:17,controls:[]})).behaviors.disable("scrollZoom"),myMap.controls.add("zoomControl",{float:"none"}),myMap.controls.add("fullscreenControl",{float:"right"}),myMap.controls.add("typeSelector"),myMap.controls.get("typeSelector").options.set("size","small"),myPlacemark=new ymaps.Placemark([59.938697,30.32312],{hintContent:"Mishka",balloonContent:"Санкт-Петербург, ул. Большая Конюшенная, д. 19/8"},{iconLayout:"default#image",iconImageHref:"img/icon-map-pin.svg",iconImageSize:[67,100],iconImageOffset:[-44,-100]}),myMap.geoObjects.add(myPlacemark)}ymaps.ready(init)}var popup=document.querySelector(".modal"),popupToogle=popup.querySelector(".modal__toogle"),formOrder=document.querySelector(".modal__form-order"),promoOrderBtn=document.querySelector(".promo-product__btn"),catalogOrderBtn=document.querySelector(".product__buy-btn");function showPopup(){popup.classList.remove("modal--close"),popup.classList.add("modal--open"),popupToogle.focus(),popup.querySelector(".modal__close-btn").addEventListener("click",closePopup),document.addEventListener("keydown",onDocumentEscPress),formOrder.addEventListener("submit",onFormOrderSubmit)}function closePopup(){popup.classList.remove("modal--open"),popup.classList.add("modal--close"),document.removeEventListener("keydown",onDocumentEscPress),formOrder.removeEventListener("submit",onFormOrderSubmit),popup.querySelector(".modal__close-btn").removeEventListener("click",closePopup)}function onDocumentEscPress(e){27===e.keyCode&&closePopup()}function onFormOrderSubmit(e){closePopup(),e.preventDefault()}promoOrderBtn&&promoOrderBtn.addEventListener("click",function(e){showPopup(),e.preventDefault()}),catalogOrderBtn&&document.addEventListener("click",function(e){e.target.closest(".product__buy-btn")&&(showPopup(),e.preventDefault())});var slider_wrapper=document.querySelector(".reviews__slider"),slider_list=document.querySelector(".slider__list"),revPrev=document.querySelector(".slider__btn--prev"),revNext=document.querySelector(".slider__btn--next"),slideToogles=document.querySelector(".slider__toggles");if(slider_list){var slideCount=0,maxSlideCount=slider_list.children.length;function slideCountControl(){switch(slideCount){case maxSlideCount-1:revNext.disabled=!0;break;case 0:revPrev.disabled=!0;break;default:revNext.disabled=!1,revPrev.disabled=!1}}function setNextSlide(){console.log("++"),slideCount<maxSlideCount-1&&(slideCount++,slider_list.style.transform="translateX(-"+slideCount*slider_wrapper.offsetWidth+"px)")}function setPrevSlide(){console.log("--"),slideCount>0&&(slideCount--,slider_list.style.transform="translateX(-"+slideCount*slider_wrapper.offsetWidth+"px)")}revNext.addEventListener("click",setNextSlide),revPrev.addEventListener("click",setPrevSlide),slideToogles.addEventListener("click",slideCountControl),$(".slider__list").swipe({swipeLeft:function(){setNextSlide(),slideCountControl()},swipeRight:function(){setPrevSlide(),slideCountControl()},threshold:0})}